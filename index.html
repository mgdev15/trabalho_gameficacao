<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabalho Gamifica√ß√£o ‚Äî Jogo de Desenvolvimento Profissional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            overflow: hidden;
        }

        /* Tela de In√≠cio */
        .screen {
            display: none;
            padding: 40px;
            min-height: 500px;
        }

        .screen.active {
            display: block;
        }

        .start-screen {
            text-align: center;
        }

        .game-title {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .game-subtitle {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
        }

        .character-sprite {
            width: 200px;
            height: 200px;
            margin: 30px auto;
            position: relative;
        }

        /* Sprite do personagem profissional */
        .sprite-professional {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 50% 50% 0 0;
            position: relative;
            animation: float 3s ease-in-out infinite;
        }

        .sprite-head {
            width: 80px;
            height: 80px;
            background: #ffd6a5;
            border-radius: 50%;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            border: 3px solid #333;
        }

        .sprite-eyes {
            width: 12px;
            height: 12px;
            background: #333;
            border-radius: 50%;
            position: absolute;
            top: 35px;
        }

        .sprite-eye-left {
            left: 22px;
        }

        .sprite-eye-right {
            right: 22px;
        }

        .sprite-smile {
            width: 30px;
            height: 15px;
            border: 3px solid #333;
            border-top: none;
            border-radius: 0 0 30px 30px;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .sprite-body {
            width: 100px;
            height: 80px;
            background: #4a90e2;
            position: absolute;
            top: 90px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 10px;
        }

        .sprite-tie {
            width: 15px;
            height: 50px;
            background: #c41e3a;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            clip-path: polygon(50% 0%, 0% 20%, 20% 100%, 80% 100%, 100% 20%);
        }

        .sprite-arms {
            width: 120px;
            height: 20px;
            background: #4a90e2;
            position: absolute;
            top: 110px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 10px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-option {
            width: 100%;
            padding: 20px;
            margin: 10px 0;
            background: white;
            border: 3px solid #e0e0e0;
            color: #333;
            text-align: left;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .btn-option:hover:not(:disabled) {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateX(10px);
        }

        .btn-option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .btn-option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .btn-option:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* Input de Nome */
        .name-input-container {
            background: #f8f9ff;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border: 3px solid #667eea;
        }

        .name-input-container h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .name-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .name-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .name-error {
            color: #f44336;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }

        /* Header do Jogo */
        .game-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .phase-info {
            font-size: 1.2em;
            font-weight: bold;
        }

        .score-display {
            font-size: 1.3em;
            font-weight: bold;
        }

        .timer-display {
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
        }

        /* Barras de Vari√°veis */
        .variables-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .variable-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 10px 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .variable-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .variable-name {
            font-size: 0.85em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .variable-value {
            font-size: 1em;
            font-weight: bold;
        }

        .variable-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .variable-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .var-produtividade .variable-fill {
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
        }

        .var-reputacao .variable-fill {
            background: linear-gradient(90deg, #2196F3, #03A9F4);
        }

        .var-conhecimento .variable-fill {
            background: linear-gradient(90deg, #FF9800, #FFC107);
        }

        .var-financeiro .variable-fill {
            background: linear-gradient(90deg, #9C27B0, #E91E63);
        }

        /* Barra de Progresso */
        .progress-container {
            background: #e0e0e0;
            height: 15px;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #8bc34a 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        /* √Årea de Quest√£o */
        .question-area {
            padding: 30px;
        }

        .question-number {
            color: #667eea;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 30px;
            color: #333;
            line-height: 1.6;
        }

        .scenario-box {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .scenario-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        /* Feedback Visual */
        .feedback {
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .feedback.correct {
            background: #4caf50;
            color: white;
        }

        .feedback.incorrect {
            background: #f44336;
            color: white;
        }

        /* Tela de Falha na Fase */
        .phase-fail-screen {
            text-align: center;
        }

        .fail-icon {
            font-size: 100px;
            margin: 20px 0;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .fail-title {
            font-size: 2em;
            color: #f44336;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .fail-message {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .fail-stats {
            background: #fff3e0;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            border-left: 4px solid #ff9800;
        }

        .fail-stats h3 {
            color: #ff9800;
            margin-bottom: 15px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #ffe0b2;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            font-weight: 600;
            color: #333;
        }

        .stat-value {
            font-weight: bold;
        }

        .stat-value.low {
            color: #f44336;
        }

        .stat-value.ok {
            color: #ff9800;
        }

        /* Tela de Resultado */
        .result-screen {
            text-align: center;
        }

        .result-sprite {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            font-size: 100px;
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .result-title {
            font-size: 2em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .result-score {
            font-size: 3em;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
        }

        .result-message {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .result-breakdown {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        /* Tela de Ranking */
        .ranking-screen {
            text-align: center;
        }

        .ranking-title {
            font-size: 2.2em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .ranking-subtitle {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 30px;
        }

        .ranking-table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
            max-height: 600px;
            overflow-y: auto;
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
        }

        .ranking-table thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .ranking-table th {
            padding: 20px 15px;
            font-weight: bold;
            font-size: 1.1em;
            text-align: left;
        }

        .ranking-table th:first-child {
            border-radius: 15px 0 0 0;
        }

        .ranking-table th:last-child {
            border-radius: 0 15px 0 0;
        }

        .ranking-table tbody tr {
            border-bottom: 1px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .ranking-table tbody tr:hover {
            background: #f8f9ff;
            transform: scale(1.02);
        }

        .ranking-table tbody tr:last-child {
            border-bottom: none;
        }

        .ranking-table td {
            padding: 18px 15px;
            font-size: 1em;
        }

        .rank-position {
            font-weight: bold;
            color: #667eea;
            font-size: 1.2em;
        }

        .rank-medal {
            font-size: 1.5em;
            margin-right: 5px;
        }

        .rank-score {
            font-weight: bold;
            color: #4caf50;
            font-size: 1.1em;
        }

        .rank-name {
            font-weight: 600;
            color: #333;
        }

        .rank-time {
            color: #666;
            font-family: 'Courier New', monospace;
        }

        .empty-ranking {
            padding: 60px 20px;
            text-align: center;
            color: #999;
        }

        .empty-ranking-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .empty-ranking-text {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .loading-ranking {
            padding: 40px;
            text-align: center;
            color: #667eea;
            font-size: 1.2em;
        }

        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #e0e0e0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tela de Cr√©ditos */
        .credits-screen {
            text-align: center;
        }

        .credits-title {
            font-size: 2.2em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .credits-subtitle {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 40px;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin: 40px 0;
            padding: 0 20px;
        }

        .team-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .team-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .team-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }

        .team-card:hover::before {
            transform: scaleX(1);
        }

        .team-avatar {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .team-card:hover .team-avatar {
            transform: scale(1.1) rotate(5deg);
        }

        .team-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .team-role {
            font-size: 0.95em;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .team-description {
            font-size: 0.85em;
            color: #666;
            line-height: 1.5;
        }

        .credits-footer {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }

        .credits-footer p {
            color: #666;
            font-size: 0.95em;
            margin: 10px 0;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .game-title {
                font-size: 1.8em;
            }

            .game-subtitle {
                font-size: 1em;
            }

            .screen {
                padding: 20px;
            }

            .header-top {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .variables-container {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
            }

            .variable-name {
                font-size: 0.75em;
            }

            .question-text {
                font-size: 1.1em;
            }

            .btn-option {
                font-size: 0.9em;
                padding: 15px;
            }

            .character-sprite {
                width: 150px;
                height: 150px;
            }

            .team-grid {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 20px;
            }

            .team-avatar {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }

            .team-name {
                font-size: 1.1em;
            }

            .credits-title {
                font-size: 1.8em;
            }

            .ranking-table {
                font-size: 0.9em;
            }

            .ranking-table th,
            .ranking-table td {
                padding: 12px 8px;
            }
        }

        @media (max-width: 480px) {
            .game-title {
                font-size: 1.5em;
            }

            #main-p{
                margin-top: 100px;
            }

            .btn {
                padding: 12px 30px;
                font-size: 1em;
            }

            .character-sprite {
                width: 120px;
                height: 120px;
            }

            .variables-container {
                grid-template-columns: 1fr 1fr;
            }

            .ranking-table th,
            .ranking-table td {
                padding: 10px 5px;
                font-size: 0.85em;
            }

            .rank-medal {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Tela de In√≠cio -->
        <div class="screen active" id="startScreen">
            <div class="start-screen">
                <h1 class="game-title">üè¢ Trabalho Gamifica√ß√£o</h1>
                <p class="game-subtitle">Desenvolva suas habilidades profissionais atrav√©s de desafios reais do ambiente corporativo</p>
                
                <div class="character-sprite">
                    <div class="sprite-professional">
                        <div class="sprite-head">
                            <div class="sprite-eyes sprite-eye-left"></div>
                            <div class="sprite-eyes sprite-eye-right"></div>
                            <div class="sprite-smile"></div>
                        </div>
                        <div class="sprite-body">
                            <div class="sprite-tie"></div>
                        </div>
                        <div class="sprite-arms"></div>
                    </div>
                </div>

                <p id="main-p" style="font-size: 1.1em; color: #666; margin-bottom: 30px;">
                    Voc√™ √© um novo colaborador em uma empresa de tecnologia.<br>
                    Enfrente 5 fases com desafios do dia a dia corporativo e prove suas habilidades!
                </p>

                <div class="name-input-container">
                    <h3>üë§ Identifique-se para come√ßar:</h3>
                    <input 
                        type="text" 
                        id="playerNameInput" 
                        class="name-input" 
                        placeholder="Digite seu nome completo"
                        maxlength="50"
                    >
                    <p class="name-error" id="nameError">Por favor, digite seu nome para continuar.</p>
                </div>

                <div style="background: #fff3e0; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #ff9800;">
                    <h3 style="color: #ff9800; margin-bottom: 10px;">üìã Regras do Jogo:</h3>
                    <ul style="text-align: left; color: #666; line-height: 1.8;">
                        <li>Cada resposta certa soma <strong>5 pontos</strong></li>
                        <li>Para avan√ßar de fase, voc√™ precisa de <strong>m√≠nimo 10 pontos</strong></li>
                        <li>Pontua√ß√£o total m√≠nima para concluir: <strong>100 pontos</strong></li>
                        <li>Se falhar, voc√™ repete a fase at√© conseguir passar</li>
                        <li>Seu tempo ser√° cronometrado para o ranking global! üåç‚è±Ô∏è</li>
                    </ul>
                </div>

                <button class="btn btn-primary" onclick="startGame()">üöÄ Come√ßar Jogo</button>
                <button class="btn btn-primary" onclick="showRankingFromStart()">üèÜ Ver Ranking Global</button>
            </div>
        </div>

        <!-- Tela de Jogo -->
        <div class="screen" id="gameScreen">
            <div class="game-header">
                <div class="header-top">
                    <div class="phase-info" id="phaseInfo">Fase 1: Onboarding</div>
                    <div class="timer-display">‚è±Ô∏è <span id="timerDisplay">00:00</span></div>
                    <div class="score-display">üìä <span id="scoreDisplay">0</span> pts</div>
                </div>

                <!-- Barras de Vari√°veis -->
                <div class="variables-container">
                    <div class="variable-item var-produtividade">
                        <div class="variable-header">
                            <span class="variable-name">‚ö° Produtividade</span>
                            <span class="variable-value" id="prodValue">0</span>
                        </div>
                        <div class="variable-bar">
                            <div class="variable-fill" id="prodBar" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="variable-item var-reputacao">
                        <div class="variable-header">
                            <span class="variable-name">‚≠ê Reputa√ß√£o</span>
                            <span class="variable-value" id="repValue">0</span>
                        </div>
                        <div class="variable-bar">
                            <div class="variable-fill" id="repBar" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="variable-item var-conhecimento">
                        <div class="variable-header">
                            <span class="variable-name">üìö Conhecimento</span>
                            <span class="variable-value" id="conValue">0</span>
                        </div>
                        <div class="variable-bar">
                            <div class="variable-fill" id="conBar" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="variable-item var-financeiro">
                        <div class="variable-header">
                            <span class="variable-name">üí∞ Financeiro</span>
                            <span class="variable-value" id="finValue">0</span>
                        </div>
                        <div class="variable-bar">
                            <div class="variable-fill" id="finBar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>

            <div class="question-area">
                <div class="question-number" id="questionNumber">Quest√£o 1 de 3</div>
                
                <div class="scenario-box" id="scenarioBox">
                    <div class="scenario-title">üìã Situa√ß√£o:</div>
                    <div id="scenarioText"></div>
                </div>

                <div class="question-text" id="questionText"></div>

                <div id="feedbackArea"></div>

                <div id="optionsArea"></div>

                <button class="btn btn-primary" id="nextBtn" style="display: none; margin-top: 20px;" onclick="nextQuestion()">
                    Pr√≥xima Quest√£o ‚Üí
                </button>
            </div>
        </div>

        <!-- Tela de Falha na Fase -->
        <div class="screen" id="phaseFailScreen">
            <div class="phase-fail-screen">
                <div class="fail-icon">üòû</div>
                <h2 class="fail-title">Desempenho Insuficiente</h2>
                <p class="fail-message">Voc√™ n√£o atingiu a pontua√ß√£o m√≠nima necess√°ria para avan√ßar nesta fase.<br>Revise os conceitos e tente novamente!</p>

                <div class="fail-stats">
                    <h3>üìä Seu Desempenho nesta Fase:</h3>
                    <div class="stat-row">
                        <span class="stat-label">‚ö° Produtividade:</span>
                        <span class="stat-value" id="failProd">0 pontos</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">‚≠ê Reputa√ß√£o:</span>
                        <span class="stat-value" id="failRep">0 pontos</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">üìö Conhecimento:</span>
                        <span class="stat-value" id="failCon">0 pontos</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">üí∞ Resultado Financeiro:</span>
                        <span class="stat-value" id="failFin">0 pontos</span>
                    </div>
                    <div class="stat-row" style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #ff9800;">
                        <span class="stat-label"><strong>Total da Fase:</strong></span>
                        <span class="stat-value" id="failTotal" style="font-size: 1.2em;">0 pontos</span>
                    </div>
                </div>

                <p style="color: #ff9800; font-weight: bold; margin: 20px 0;">
                    ‚ö†Ô∏è Pontua√ß√£o m√≠nima necess√°ria: 10 pontos
                </p>

                <button class="btn btn-primary" onclick="retryPhase()">üîÑ Tentar Novamente</button>
            </div>
        </div>

        <!-- Tela de Resultado -->
        <div class="screen" id="resultScreen">
            <div class="result-screen">
                <div class="result-sprite" id="resultEmoji">üéâ</div>
                <h2 class="result-title" id="resultTitle">Parab√©ns!</h2>
                <div class="result-score" id="finalScore">0</div>
                <p class="result-message" id="resultMessage"></p>

                <div class="result-breakdown">
                    <h3 style="margin-bottom: 15px; color: #667eea;">üìä Desempenho Final:</h3>
                    <div class="stat-row">
                        <span class="stat-label">‚ö° Produtividade Total:</span>
                        <span class="stat-value" id="finalProd">0 pts</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">‚≠ê Reputa√ß√£o Total:</span>
                        <span class="stat-value" id="finalRep">0 pts</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">üìö Conhecimento Total:</span>
                        <span class="stat-value" id="finalCon">0 pts</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">üí∞ Resultado Financeiro Total:</span>
                        <span class="stat-value" id="finalFin">0 pts</span>
                    </div>
                    <div class="stat-row" style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #667eea;">
                        <span class="stat-label">‚è±Ô∏è Tempo Total:</span>
                        <span class="stat-value" id="finalTime">00:00</span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="showRanking()">üèÜ Ver Ranking Global</button>
                <button class="btn btn-primary" onclick="showCredits()">üë• Ver Equipe de Desenvolvimento</button>
                <button class="btn btn-primary" onclick="restartGame()">üîÑ Jogar Novamente</button>
            </div>
        </div>

        <!-- Tela de Ranking -->
        <div class="screen" id="rankingScreen">
            <div class="ranking-screen">
                <h1 class="ranking-title">üèÜ Ranking Global</h1>
                <p class="ranking-subtitle">Os melhores desempenhos de jogadores ao redor do mundo</p>

                <div class="ranking-table-container">
                    <table class="ranking-table">
                        <thead>
                            <tr>
                                <th>Pontua√ß√£o</th>
                                <th>Nome</th>
                                <th>Tempo</th>
                            </tr>
                        </thead>
                        <tbody id="rankingTableBody">
                            <tr>
                                <td colspan="3">
                                    <div class="loading-ranking">
                                        <div class="loading-spinner"></div>
                                        <p>Carregando ranking...</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <button class="btn btn-primary" onclick="backToResults()">‚Üê Voltar aos Resultados</button>
                <button class="btn btn-primary" onclick="restartGame()">üîÑ Jogar Novamente</button>
            </div>
        </div>

        <!-- Tela de Cr√©ditos -->
        <div class="screen" id="creditsScreen">
            <div class="credits-screen">
                <h1 class="credits-title">üéÆ Equipe de Desenvolvimento</h1>
                <p class="credits-subtitle">Conhe√ßa os profissionais que tornaram este jogo poss√≠vel</p>

                <div class="team-grid">
                    <!-- Membro 1 -->
                    <div class="team-card">
                        <div class="team-avatar">üë®‚Äçüíª</div>
                        <div class="team-name">Paulo Arthur</div>
                        <div class="team-role">Jovem Aprendiz</div>
                    </div>

                    <!-- Membro 2 -->
                    <div class="team-card">
                        <div class="team-avatar">üé®</div>
                        <div class="team-name">Carlos Costa</div>
                        <div class="team-role">Jovem Aprendiz</div>
                    </div>

                    <!-- Membro 3 -->
                    <div class="team-card">
                        <div class="team-avatar">üìù</div>
                        <div class="team-name">Pedro de Oliveira</div>
                        <div class="team-role">Jovem Aprendiz</div>
                    </div>

                    <!-- Membro 4 -->
                    <div class="team-card">
                        <div class="team-avatar">üéØ</div>
                        <div class="team-name">Bernardo Silva</div>
                        <div class="team-role">Jovem Aprendiz</div>
                    </div>
                </div>

                <div class="credits-footer">
                    <p><strong>üè¢ Trabalho Gamifica√ß√£o</strong></p>
                    <p>Desenvolvido com dedica√ß√£o para transformar o aprendizado corporativo</p>
                    <p style="font-size: 0.85em; color: #999; margin-top: 20px;">¬© 2026 - Todos os direitos reservados</p>
                </div>

                <button class="btn btn-primary" style="margin-top: 30px;" onclick="backToResults()">‚Üê Voltar aos Resultados</button>
                <button class="btn btn-primary" style="margin-top: 30px;" onclick="restartGame()">üîÑ Jogar Novamente</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getDatabase, ref, push, set, onValue, query, orderByChild, limitToLast } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js';

        // ==================== CONFIGURA√á√ÉO DO FIREBASE ====================
        // SUBSTITUA ESTAS CREDENCIAIS PELAS SUAS DO FIREBASE!
        const firebaseConfig = {
            apiKey: "AIzaSyAj72MtNcE5Pmza-nKZrLkBtqy0ax2KyWQ",
            authDomain: "trabalho-gamificacao.firebaseapp.com",
            databaseURL: "https://trabalho-gamificacao-default-rtdb.firebaseio.com",
            projectId: "trabalho-gamificacao",
            storageBucket: "trabalho-gamificacao.firebasestorage.app",
            messagingSenderId: "1025455529602",
            appId: "1:1025455529602:web:97b7989efa63765be5de9b"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Disponibilizar fun√ß√µes globalmente
        window.firebaseDB = database;
        window.firebaseRef = ref;
        window.firebasePush = push;
        window.firebaseSet = set;
        window.firebaseOnValue = onValue;
        window.firebaseQuery = query;
        window.firebaseOrderByChild = orderByChild;
        window.firebaseLimitToLast = limitToLast;
    </script>

    <script>
        // ==================== CONFIGURA√á√ÉO DO JOGO ====================
        
        // Estrutura de fases do jogo com vari√°veis
        const gamePhases = [
            {
                id: 1,
                name: "Onboarding - Primeiro Dia",
                description: "Sua entrada na empresa",
                questions: [
                    {
                        scenario: "√â seu primeiro dia na empresa XP Next. Voc√™ chega 15 minutos antes do hor√°rio e encontra a recep√ß√£o vazia.",
                        question: "Qual √© a melhor a√ß√£o a tomar?",
                        options: [
                            { 
                                text: "Esperar na recep√ß√£o mexendo no celular at√© algu√©m aparecer", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Razo√°vel, mas voc√™ poderia ser mais proativo!" 
                            },
                            { 
                                text: "Procurar avisar algu√©m da sua chegada ou ligar para o RH", 
                                variables: { produtividade: 5, reputacao: 5, conhecimento: 0, financeiro: 0 },
                                feedback: "Excelente! Proatividade √© fundamental no primeiro dia." 
                            },
                            { 
                                text: "Ir embora e voltar no hor√°rio exato do expediente", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: 0, financeiro: 0 },
                                feedback: "Isso demonstra falta de comprometimento." 
                            }
                        ]
                    },
                    {
                        scenario: "Seu gestor lhe entrega um manual de 50 p√°ginas sobre processos da empresa e diz que voc√™ ter√° uma avalia√ß√£o sobre o conte√∫do em uma semana.",
                        question: "Como voc√™ organiza seu estudo?",
                        options: [
                            { 
                                text: "Deixar para ler tudo nos √∫ltimos 2 dias antes da avalia√ß√£o", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Procrastina√ß√£o pode causar estresse e baixa reten√ß√£o." 
                            },
                            { 
                                text: "Ler 7-8 p√°ginas por dia e fazer anota√ß√µes dos pontos principais", 
                                variables: { produtividade: 5, reputacao: 0, conhecimento: 5, financeiro: 0 },
                                feedback: "Perfeito! Organiza√ß√£o e consist√™ncia s√£o chaves do sucesso." 
                            },
                            { 
                                text: "Pedir para um colega resumir o conte√∫do para voc√™", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: -5, financeiro: 0 },
                                feedback: "Isso demonstra falta de responsabilidade individual." 
                            }
                        ]
                    },
                    {
                        scenario: "Durante o tour pela empresa, voc√™ √© apresentado a 15 pessoas de diferentes departamentos.",
                        question: "Qual √© a melhor estrat√©gia para lembrar de todos?",
                        options: [
                            { 
                                text: "Anotar os nomes e fun√ß√µes em um caderno logo ap√≥s as apresenta√ß√µes", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 5, financeiro: 0 },
                                feedback: "√ìtimo! Registrar informa√ß√µes √© uma habilidade profissional valiosa." 
                            },
                            { 
                                text: "Confiar na sua mem√≥ria e tentar lembrar naturalmente", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Arriscado! A mem√≥ria pode falhar sob press√£o." 
                            },
                            { 
                                text: "N√£o se preocupar muito, voc√™ aprender√° com o tempo", 
                                variables: { produtividade: 0, reputacao: -5, conhecimento: 0, financeiro: 0 },
                                feedback: "Isso pode passar uma impress√£o de desinteresse." 
                            }
                        ]
                    }
                ]
            },
            {
                id: 2,
                name: "Gest√£o de Tempo",
                description: "Organiza√ß√£o e prioriza√ß√£o",
                questions: [
                    {
                        scenario: "S√£o 9h da manh√£ e voc√™ tem 4 tarefas para hoje: Relat√≥rio urgente (2h), Reuni√£o √†s 14h (precisa preparar), E-mails pendentes (1h), Treinamento online (3h).",
                        question: "Qual a melhor ordem de execu√ß√£o?",
                        options: [
                            { 
                                text: "E-mails ‚Üí Treinamento ‚Üí Relat√≥rio ‚Üí Prepara√ß√£o para reuni√£o", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: -5 },
                                feedback: "Voc√™ deixou tarefas urgentes para o final." 
                            },
                            { 
                                text: "Relat√≥rio urgente ‚Üí Prepara√ß√£o reuni√£o ‚Üí E-mails ‚Üí Treinamento", 
                                variables: { produtividade: 5, reputacao: 5, conhecimento: 0, financeiro: 5 },
                                feedback: "Excelente prioriza√ß√£o! Urgente e importante primeiro." 
                            },
                            { 
                                text: "Treinamento ‚Üí Relat√≥rio ‚Üí E-mails ‚Üí Reuni√£o sem prepara√ß√£o", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: 0, financeiro: -5 },
                                feedback: "P√©ssima gest√£o de prioridades." 
                            }
                        ]
                    },
                    {
                        scenario: "Voc√™ est√° no meio de uma tarefa importante quando um colega pede ajuda urgente em algo que levar√° 30 minutos.",
                        question: "Como voc√™ procede?",
                        options: [
                            { 
                                text: "Parar tudo imediatamente e ajudar o colega", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 0, financeiro: 0 },
                                feedback: "Colabora√ß√£o √© boa, mas sem avaliar o impacto pode prejudicar seu trabalho." 
                            },
                            { 
                                text: "Perguntar se pode ajud√°-lo em 20 minutos, ap√≥s finalizar sua etapa atual", 
                                variables: { produtividade: 5, reputacao: 5, conhecimento: 0, financeiro: 0 },
                                feedback: "Perfeito! Voc√™ equilibrou colabora√ß√£o com foco na sua tarefa." 
                            },
                            { 
                                text: "Recusar completamente, dizendo que est√° ocupado", 
                                variables: { produtividade: 0, reputacao: -5, conhecimento: 0, financeiro: 0 },
                                feedback: "Trabalho em equipe tamb√©m √© importante. Busque um meio termo." 
                            }
                        ]
                    },
                    {
                        scenario: "Voc√™ percebe que n√£o conseguir√° entregar uma tarefa no prazo original de hoje √†s 18h. S√£o 15h e voc√™ ainda precisa de 4 horas.",
                        question: "Qual a melhor atitude?",
                        options: [
                            { 
                                text: "Trabalhar at√© conseguir terminar, mesmo que seja depois do hor√°rio", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Dedica√ß√£o √© boa, mas comunica√ß√£o pr√©via √© essencial." 
                            },
                            { 
                                text: "Avisar seu gestor imediatamente, explicar a situa√ß√£o e negociar novo prazo", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 5, financeiro: 0 },
                                feedback: "Excelente! Transpar√™ncia e comunica√ß√£o proativa s√£o fundamentais." 
                            },
                            { 
                                text: "Entregar incompleto no prazo sem avisar ningu√©m", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: 0, financeiro: -5 },
                                feedback: "Isso pode causar problemas s√©rios e perda de confian√ßa." 
                            }
                        ]
                    }
                ]
            },
            {
                id: 3,
                name: "Atendimento ao Cliente",
                description: "Comunica√ß√£o e resolu√ß√£o de problemas",
                questions: [
                    {
                        scenario: "Um cliente entra em contato extremamente irritado porque recebeu um produto com defeito. Ele j√° est√° alterado e usando palavras grosseiras.",
                        question: "Como voc√™ deve iniciar o atendimento?",
                        options: [
                            { 
                                text: "Pedir para ele se acalmar antes de continuar a conversa", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Isso pode irritar ainda mais o cliente." 
                            },
                            { 
                                text: "Ouvir atentamente, demonstrar empatia e pedir desculpas pelo transtorno", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 0, financeiro: 5 },
                                feedback: "Perfeito! Empatia √© a chave para reverter situa√ß√µes dif√≠ceis." 
                            },
                            { 
                                text: "Explicar que a culpa n√£o √© sua e transferir para outro setor", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: 0, financeiro: -5 },
                                feedback: "Isso demonstra falta de responsabilidade e profissionalismo." 
                            }
                        ]
                    },
                    {
                        scenario: "Um cliente pergunta sobre um produto que n√£o est√° dispon√≠vel no momento, mas voc√™ sabe que um concorrente tem.",
                        question: "O que voc√™ faz?",
                        options: [
                            { 
                                text: "Dizer que n√£o tem e encerrar o atendimento", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: -5 },
                                feedback: "Voc√™ perdeu a oportunidade de ajudar e fidelizar o cliente." 
                            },
                            { 
                                text: "Oferecer alternativas similares da sua empresa e perguntar se pode ajudar de outra forma", 
                                variables: { produtividade: 5, reputacao: 5, conhecimento: 0, financeiro: 5 },
                                feedback: "Excelente! Voc√™ buscou solu√ß√µes dentro das possibilidades da empresa." 
                            },
                            { 
                                text: "Indicar abertamente o concorrente", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: -5 },
                                feedback: "Honestidade √© boa, mas voc√™ deveria tentar solu√ß√µes internas primeiro." 
                            }
                        ]
                    },
                    {
                        scenario: "Voc√™ prometeu retornar para um cliente em 24h com uma solu√ß√£o, mas ap√≥s 48h voc√™ ainda n√£o tem resposta do setor respons√°vel.",
                        question: "Qual a melhor a√ß√£o?",
                        options: [
                            { 
                                text: "Esperar ter a resposta completa antes de entrar em contato", 
                                variables: { produtividade: 0, reputacao: -5, conhecimento: 0, financeiro: 0 },
                                feedback: "O cliente ficar√° frustrado pela falta de retorno." 
                            },
                            { 
                                text: "Entrar em contato, pedir desculpas pelo atraso e dar uma previs√£o realista", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 5, financeiro: 0 },
                                feedback: "Perfeito! Manter o cliente informado mant√©m a confian√ßa." 
                            },
                            { 
                                text: "Enviar uma mensagem autom√°tica gen√©rica", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: 0, financeiro: -5 },
                                feedback: "Isso demonstra descaso com o cliente." 
                            }
                        ]
                    }
                ]
            },
            {
                id: 4,
                name: "Trabalho em Equipe",
                description: "Colabora√ß√£o e lideran√ßa",
                questions: [
                    {
                        scenario: "Sua equipe de 5 pessoas precisa apresentar um projeto em 3 dias, mas dois membros est√£o sobrecarregados com outras tarefas.",
                        question: "Como voc√™ organiza o time?",
                        options: [
                            { 
                                text: "Dividir igualmente entre todos os 5 membros", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Voc√™ ignorou que 2 membros est√£o sobrecarregados." 
                            },
                            { 
                                text: "Redistribuir as tarefas para os 3 membros dispon√≠veis e oferecer suporte aos sobrecarregados", 
                                variables: { produtividade: 5, reputacao: 5, conhecimento: 5, financeiro: 0 },
                                feedback: "Excelente gest√£o! Voc√™ considerou a realidade de cada um." 
                            },
                            { 
                                text: "Fazer tudo sozinho para garantir a qualidade", 
                                variables: { produtividade: -5, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Isso n√£o √© trabalho em equipe e pode levar ao burnout." 
                            }
                        ]
                    },
                    {
                        scenario: "Durante uma reuni√£o, um colega apresenta uma ideia que voc√™ sabe que n√£o funcionar√°, baseado em experi√™ncia anterior.",
                        question: "Como voc√™ expressa sua opini√£o?",
                        options: [
                            { 
                                text: "Interromper e dizer diretamente que a ideia n√£o vai funcionar", 
                                variables: { produtividade: 0, reputacao: -5, conhecimento: 0, financeiro: 0 },
                                feedback: "Isso pode constranger o colega e criar conflito." 
                            },
                            { 
                                text: "Esperar ele terminar, elogiar a iniciativa e apresentar os desafios de forma construtiva", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 5, financeiro: 0 },
                                feedback: "Perfeito! Feedback construtivo preserva o relacionamento." 
                            },
                            { 
                                text: "N√£o falar nada para evitar conflito", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: -5, financeiro: -5 },
                                feedback: "Omiss√£o pode prejudicar o projeto e a equipe." 
                            }
                        ]
                    },
                    {
                        scenario: "Voc√™ foi designado l√≠der tempor√°rio de um projeto e percebe que um membro n√£o est√° contribuindo adequadamente.",
                        question: "Qual sua abordagem?",
                        options: [
                            { 
                                text: "Conversar em particular, entender os motivos e oferecer ajuda", 
                                variables: { produtividade: 5, reputacao: 5, conhecimento: 0, financeiro: 0 },
                                feedback: "Excelente lideran√ßa! Empatia e comunica√ß√£o individual s√£o fundamentais." 
                            },
                            { 
                                text: "Expor o problema na frente de todos em reuni√£o", 
                                variables: { produtividade: 0, reputacao: -5, conhecimento: 0, financeiro: -5 },
                                feedback: "Isso cria constrangimento e prejudica o clima da equipe." 
                            },
                            { 
                                text: "Relatar diretamente ao seu gestor sem conversar com a pessoa", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Voc√™ deveria tentar resolver diretamente primeiro." 
                            }
                        ]
                    }
                ]
            },
            {
                id: 5,
                name: "Tomada de Decis√£o sob Press√£o",
                description: "Decis√µes estrat√©gicas em situa√ß√µes cr√≠ticas",
                questions: [
                    {
                        scenario: "Faltam 2 horas para uma apresenta√ß√£o importante e voc√™ descobre um erro cr√≠tico nos dados. Corrigir levar√° 3 horas.",
                        question: "O que voc√™ decide fazer?",
                        options: [
                            { 
                                text: "Apresentar com o erro e torcer para ningu√©m perceber", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: 0, financeiro: -5 },
                                feedback: "Isso pode destruir sua credibilidade profissional." 
                            },
                            { 
                                text: "Informar imediatamente, apresentar o que est√° correto e propor nova data para o completo", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 0, financeiro: 5 },
                                feedback: "Excelente! Transpar√™ncia e responsabilidade s√£o essenciais." 
                            },
                            { 
                                text: "Cancelar a apresenta√ß√£o sem explica√ß√µes", 
                                variables: { produtividade: 0, reputacao: -5, conhecimento: 0, financeiro: 0 },
                                feedback: "Falta de comunica√ß√£o gera desconfian√ßa." 
                            }
                        ]
                    },
                    {
                        scenario: "Voc√™ recebe duas ofertas de emprego: uma com 30% mais sal√°rio mas em √°rea que n√£o gosta, outra com crescimento menor mas na √°rea dos sonhos.",
                        question: "Quais fatores voc√™ prioriza na decis√£o?",
                        options: [
                            { 
                                text: "Escolher apenas pelo sal√°rio maior, dinheiro resolve tudo", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Satisfa√ß√£o profissional tamb√©m √© importante para o longo prazo." 
                            },
                            { 
                                text: "Avaliar equil√≠brio entre satisfa√ß√£o, crescimento profissional e remunera√ß√£o", 
                                variables: { produtividade: 5, reputacao: 0, conhecimento: 5, financeiro: 5 },
                                feedback: "Perfeito! Decis√µes de carreira devem ser hol√≠sticas." 
                            },
                            { 
                                text: "Jogar uma moeda, deixar a sorte decidir", 
                                variables: { produtividade: -5, reputacao: -5, conhecimento: -5, financeiro: 0 },
                                feedback: "Decis√µes importantes merecem an√°lise criteriosa." 
                            }
                        ]
                    },
                    {
                        scenario: "Seu gestor pede sua opini√£o sobre demitir um colega de equipe que n√£o est√° performando bem, mas que voc√™ sabe estar passando por problemas pessoais graves.",
                        question: "Como voc√™ responde?",
                        options: [
                            { 
                                text: "Concordar com a demiss√£o, afinal √© uma decis√£o de neg√≥cios", 
                                variables: { produtividade: 0, reputacao: 0, conhecimento: 0, financeiro: 0 },
                                feedback: "Voc√™ poderia considerar fatores humanos tamb√©m." 
                            },
                            { 
                                text: "Sugerir um plano de desenvolvimento e suporte tempor√°rio antes de decis√µes dr√°sticas", 
                                variables: { produtividade: 0, reputacao: 5, conhecimento: 5, financeiro: 0 },
                                feedback: "Excelente! Voc√™ equilibrou empatia com responsabilidade empresarial." 
                            },
                            { 
                                text: "Recusar dar opini√£o para n√£o se envolver", 
                                variables: { produtividade: 0, reputacao: -5, conhecimento: 0, financeiro: 0 },
                                feedback: "Quando solicitado, voc√™ deve contribuir com sua vis√£o." 
                            }
                        ]
                    }
                ]
            }
        ];

        // ==================== VARI√ÅVEIS DO JOGO ====================
        let currentPhase = 0;
        let currentQuestion = 0;
        let totalScore = 0;
        let playerName = '';
        
        // Vari√°veis individuais GLOBAIS
        let produtividade = 0;
        let reputacao = 0;
        let conhecimento = 0;
        let financeiro = 0;

        // Vari√°veis da fase atual
        let phaseProdutividade = 0;
        let phaseReputacao = 0;
        let phaseConhecimento = 0;
        let phaseFinanceiro = 0;

        let totalQuestions = 0;
        let answeredQuestions = 0;

        // Vari√°veis de tempo
        let gameStartTime = 0;
        let gameEndTime = 0;
        let timerInterval = null;

        // Pontua√ß√£o m√≠nima para passar de fase (10 pontos no total da fase)
        const MIN_PHASE_SCORE = 10;
        // Pontua√ß√£o m√≠nima geral para concluir o jogo com sucesso (100 pontos)
        const MIN_SUCCESS_SCORE = 100;
        // Pontua√ß√£o m√°xima poss√≠vel por vari√°vel (5 fases x 3 quest√µes x 5 pontos = 75)
        const MAX_VARIABLE_SCORE = 75;

        // ==================== SISTEMA DE RANKING FIREBASE ====================

        function saveToRanking(name, score, time) {
            try {
                const rankingRef = window.firebaseRef(window.firebaseDB, 'ranking');
                const newRankingRef = window.firebasePush(rankingRef);
                
                window.firebaseSet(newRankingRef, {
                    name: name,
                    score: score,
                    time: time,
                    timestamp: Date.now()
                }).then(() => {
                    console.log('‚úÖ Pontua√ß√£o salva no ranking global!');
                }).catch((error) => {
                    console.error('‚ùå Erro ao salvar no ranking:', error);
                });
            } catch (error) {
                console.error('‚ùå Erro ao acessar Firebase:', error);
            }
        }

        function loadRanking() {
            const tableBody = document.getElementById('rankingTableBody');
            
            try {
                const rankingRef = window.firebaseRef(window.firebaseDB, 'ranking');
                
                window.firebaseOnValue(rankingRef, (snapshot) => {
                    const data = snapshot.val();
                    
                    if (!data) {
                        tableBody.innerHTML = `
                            <tr>
                                <td colspan="3">
                                    <div class="empty-ranking">
                                        <div class="empty-ranking-icon">üèÜ</div>
                                        <p class="empty-ranking-text">Nenhum jogador registrado ainda</p>
                                        <p style="font-size: 0.9em; color: #999;">Seja o primeiro a completar o jogo!</p>
                                    </div>
                                </td>
                            </tr>
                        `;
                        return;
                    }
                    
                    // Converter objeto para array
                    const ranking = Object.values(data);
                    
                    // Ordenar por pontua√ß√£o (descendente), depois por tempo (ascendente)
                    ranking.sort((a, b) => {
                        if (b.score !== a.score) {
                            return b.score - a.score;
                        }
                        return a.time - b.time;
                    });
                    
                    tableBody.innerHTML = '';
                    
                    ranking.forEach((entry, index) => {
                        const row = document.createElement('tr');
                        
                        // Medalhas para top 3
                        let medal = '';
                        if (index === 0) medal = 'ü•á';
                        else if (index === 1) medal = 'ü•à';
                        else if (index === 2) medal = 'ü•â';
                        
                        row.innerHTML = `
                            <td>
                                <span class="rank-position">
                                    <span class="rank-medal">${medal}</span>
                                    <span class="rank-score">${entry.score} pts</span>
                                </span>
                            </td>
                            <td><span class="rank-name">${entry.name}</span></td>
                            <td><span class="rank-time">${formatTime(entry.time)}</span></td>
                        `;
                        
                        tableBody.appendChild(row);
                    });
                });
            } catch (error) {
                console.error('‚ùå Erro ao carregar ranking:', error);
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="3">
                            <div class="empty-ranking">
                                <div class="empty-ranking-icon">‚ö†Ô∏è</div>
                                <p class="empty-ranking-text">Erro ao carregar ranking</p>
                                <p style="font-size: 0.9em; color: #999;">Verifique sua conex√£o com a internet</p>
                            </div>
                        </td>
                    </tr>
                `;
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
            document.getElementById('timerDisplay').textContent = formatTime(elapsed);
        }

        function startTimer() {
            gameStartTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            gameEndTime = Math.floor((Date.now() - gameStartTime) / 1000);
        }

        // ==================== FUN√á√ïES PRINCIPAIS ====================

        function startGame() {
            // Validar nome do jogador
            const nameInput = document.getElementById('playerNameInput');
            const nameError = document.getElementById('nameError');
            
            playerName = nameInput.value.trim();
            
            if (playerName === '') {
                nameError.style.display = 'block';
                nameInput.focus();
                return;
            }
            
            nameError.style.display = 'none';

            // Resetar todas vari√°veis
            currentPhase = 0;
            currentQuestion = 0;
            totalScore = 0;
            
            produtividade = 0;
            reputacao = 0;
            conhecimento = 0;
            financeiro = 0;
            
            totalQuestions = gamePhases.reduce((sum, phase) => sum + phase.questions.length, 0);
            answeredQuestions = 0;

            // Iniciar cron√¥metro
            startTimer();

            // Mudar para tela de jogo
            switchScreen('startScreen', 'gameScreen');
            
            // Carregar primeira quest√£o
            loadPhase();
        }

        function loadPhase() {
            // Resetar vari√°veis da fase
            phaseProdutividade = 0;
            phaseReputacao = 0;
            phaseConhecimento = 0;
            phaseFinanceiro = 0;
            
            currentQuestion = 0;
            loadQuestion();
        }

        function loadQuestion() {
            const phase = gamePhases[currentPhase];
            const question = phase.questions[currentQuestion];

            // Atualizar informa√ß√µes da fase
            document.getElementById('phaseInfo').textContent = `Fase ${phase.id}: ${phase.name}`;
            document.getElementById('scoreDisplay').textContent = totalScore;
            document.getElementById('questionNumber').textContent = 
                `Quest√£o ${currentQuestion + 1} de ${phase.questions.length}`;

            // Atualizar cen√°rio e quest√£o
            document.getElementById('scenarioText').textContent = question.scenario;
            document.getElementById('questionText').textContent = question.question;

            // Limpar feedback
            document.getElementById('feedbackArea').innerHTML = '';

            // Esconder bot√£o pr√≥ximo
            document.getElementById('nextBtn').style.display = 'none';

            // Randomizar e exibir op√ß√µes
            displayOptions(question.options);

            // Atualizar barra de progresso
            updateProgressBar();
            
            // Atualizar displays de vari√°veis
            updateVariableDisplays();
        }

        function displayOptions(options) {
            const optionsArea = document.getElementById('optionsArea');
            optionsArea.innerHTML = '';

            // Criar c√≥pia do array e randomizar
            const shuffledOptions = [...options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'btn-option';
                button.textContent = option.text;
                button.onclick = () => selectAnswer(option, button);
                optionsArea.appendChild(button);
            });
        }

        function selectAnswer(selectedOption, button) {
            // Desabilitar todos os bot√µes
            const allButtons = document.querySelectorAll('.btn-option');
            allButtons.forEach(btn => btn.disabled = true);

            // Verificar se √© a melhor resposta (soma total de todas vari√°veis >= 10)
            const totalPoints = Object.values(selectedOption.variables).reduce((sum, val) => sum + val, 0);
            const isBestAnswer = totalPoints >= 10;
            
            button.classList.add(isBestAnswer ? 'correct' : 'incorrect');

            // Destacar a melhor resposta se o usu√°rio n√£o escolheu ela
            if (!isBestAnswer) {
                allButtons.forEach(btn => {
                    const phase = gamePhases[currentPhase];
                    const question = phase.questions[currentQuestion];
                    const bestOption = question.options.find(opt => {
                        const pts = Object.values(opt.variables).reduce((sum, val) => sum + val, 0);
                        return pts >= 10;
                    });
                    if (bestOption && btn.textContent === bestOption.text) {
                        btn.classList.add('correct');
                    }
                });
            }

            // Adicionar pontos √†s vari√°veis da fase
            phaseProdutividade += selectedOption.variables.produtividade;
            phaseReputacao += selectedOption.variables.reputacao;
            phaseConhecimento += selectedOption.variables.conhecimento;
            phaseFinanceiro += selectedOption.variables.financeiro;

            // Adicionar pontos √†s vari√°veis globais
            produtividade += selectedOption.variables.produtividade;
            reputacao += selectedOption.variables.reputacao;
            conhecimento += selectedOption.variables.conhecimento;
            financeiro += selectedOption.variables.financeiro;

            // Calcular pontua√ß√£o total
            totalScore = produtividade + reputacao + conhecimento + financeiro;
            
            // Atualizar displays
            updateVariableDisplays();

            // Mostrar feedback
            showFeedback(selectedOption.feedback, isBestAnswer);

            // Incrementar quest√µes respondidas
            answeredQuestions++;
            updateProgressBar();

            // Mostrar bot√£o de pr√≥xima quest√£o
            document.getElementById('nextBtn').style.display = 'inline-block';
            updateNextButtonText();
        }

        function showFeedback(message, isCorrect) {
            const feedbackArea = document.getElementById('feedbackArea');
            feedbackArea.innerHTML = `
                <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                    ${isCorrect ? '‚úÖ' : '‚ùå'} ${message}
                </div>
            `;
        }

        function updateVariableDisplays() {
            // Atualizar valores
            document.getElementById('prodValue').textContent = produtividade;
            document.getElementById('repValue').textContent = reputacao;
            document.getElementById('conValue').textContent = conhecimento;
            document.getElementById('finValue').textContent = financeiro;
            document.getElementById('scoreDisplay').textContent = totalScore;

            // Atualizar barras (percentual sobre o m√°ximo poss√≠vel)
            const prodPercent = Math.max(0, Math.min(100, (produtividade / MAX_VARIABLE_SCORE) * 100));
            const repPercent = Math.max(0, Math.min(100, (reputacao / MAX_VARIABLE_SCORE) * 100));
            const conPercent = Math.max(0, Math.min(100, (conhecimento / MAX_VARIABLE_SCORE) * 100));
            const finPercent = Math.max(0, Math.min(100, (financeiro / MAX_VARIABLE_SCORE) * 100));

            document.getElementById('prodBar').style.width = prodPercent + '%';
            document.getElementById('repBar').style.width = repPercent + '%';
            document.getElementById('conBar').style.width = conPercent + '%';
            document.getElementById('finBar').style.width = finPercent + '%';
        }

        function updateProgressBar() {
            const progress = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function updateNextButtonText() {
            const nextBtn = document.getElementById('nextBtn');
            const phase = gamePhases[currentPhase];
            
            if (currentQuestion < phase.questions.length - 1) {
                nextBtn.textContent = 'Pr√≥xima Quest√£o ‚Üí';
            } else {
                nextBtn.textContent = 'Concluir Fase ‚Üí';
            }
        }

        function nextQuestion() {
            const phase = gamePhases[currentPhase];

            // Verificar se h√° mais quest√µes na fase atual
            if (currentQuestion < phase.questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } 
            // Fim da fase - verificar pontua√ß√£o
            else {
                checkPhaseCompletion();
            }
        }

        function checkPhaseCompletion() {
            const phaseTotal = phaseProdutividade + phaseReputacao + phaseConhecimento + phaseFinanceiro;
            
            if (phaseTotal < MIN_PHASE_SCORE) {
                // Falhou na fase
                showPhaseFail();
            } else {
                // Passou na fase
                if (currentPhase < gamePhases.length - 1) {
                    // Ir para pr√≥xima fase
                    currentPhase++;
                    loadPhase();
                } else {
                    // Fim do jogo
                    stopTimer();
                    showResults();
                }
            }
        }

        function showPhaseFail() {
            // Atualizar estat√≠sticas da falha
            document.getElementById('failProd').textContent = phaseProdutividade + ' pontos';
            document.getElementById('failRep').textContent = phaseReputacao + ' pontos';
            document.getElementById('failCon').textContent = phaseConhecimento + ' pontos';
            document.getElementById('failFin').textContent = phaseFinanceiro + ' pontos';
            
            const phaseTotal = phaseProdutividade + phaseReputacao + phaseConhecimento + phaseFinanceiro;
            document.getElementById('failTotal').textContent = phaseTotal + ' pontos';
            
            // Aplicar classe de cor
            const statValues = document.querySelectorAll('#phaseFailScreen .stat-value');
            statValues.forEach(el => {
                const value = parseInt(el.textContent);
                if (value < 0) {
                    el.classList.add('low');
                } else if (value < 5) {
                    el.classList.add('ok');
                }
            });

            // Mudar para tela de falha
            switchScreen('gameScreen', 'phaseFailScreen');
        }

        function retryPhase() {
            // Remover pontos da fase das vari√°veis globais
            produtividade -= phaseProdutividade;
            reputacao -= phaseReputacao;
            conhecimento -= phaseConhecimento;
            financeiro -= phaseFinanceiro;
            
            // Recalcular total
            totalScore = produtividade + reputacao + conhecimento + financeiro;
            
            // Resetar contadores de resposta da fase
            const phase = gamePhases[currentPhase];
            answeredQuestions -= phase.questions.length;
            
            // Voltar para o jogo e recarregar a fase
            switchScreen('phaseFailScreen', 'gameScreen');
            loadPhase();
        }

        function showResults() {
            const maxScore = totalQuestions * 10; // 15 quest√µes x 10 pontos = 150 max

            // Salvar no ranking Firebase
            saveToRanking(playerName, totalScore, gameEndTime);

            // Determinar resultado baseado na pontua√ß√£o total
            let emoji, title, message;
            if (totalScore >= 130) {
                emoji = 'üèÜ';
                title = 'Excepcional!';
                message = 'Voc√™ demonstrou excel√™ncia em todas as compet√™ncias! Est√° pronto para desafios ainda maiores no ambiente corporativo.';
            } else if (totalScore >= MIN_SUCCESS_SCORE) {
                emoji = 'üåü';
                title = 'Parab√©ns!';
                message = '√ìtimo desempenho! Voc√™ completou com sucesso o treinamento e demonstrou compreens√£o das situa√ß√µes corporativas.';
            } else if (totalScore >= 80) {
                emoji = 'üëç';
                title = 'Conclu√≠do!';
                message = 'Voc√™ completou todas as fases! Continue desenvolvendo suas habilidades profissionais.';
            } else {
                emoji = 'üìö';
                title = 'Jogo Completo!';
                message = 'Voc√™ chegou ao fim! H√° espa√ßo para crescimento. Jogue novamente para melhorar suas pontua√ß√µes.';
            }

            // Atualizar elementos da tela de resultado
            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('finalScore').textContent = `${totalScore} pontos`;
            document.getElementById('resultMessage').textContent = message;

            // Atualizar breakdown de vari√°veis
            document.getElementById('finalProd').textContent = produtividade;
            document.getElementById('finalRep').textContent = reputacao;
            document.getElementById('finalCon').textContent = conhecimento;
            document.getElementById('finalFin').textContent = financeiro;
            document.getElementById('finalTime').textContent = formatTime(gameEndTime);

            // Mudar para tela de resultado
            switchScreen('gameScreen', 'resultScreen');
        }

        function showRanking() {
            loadRanking();
            switchScreen('resultScreen', 'rankingScreen');
        }

        function showRankingFromStart() {
            loadRanking();
            switchScreen('startScreen', 'rankingScreen');
        }

        function restartGame() {
            // Limpar input de nome
            document.getElementById('playerNameInput').value = '';
            
            // Voltar para tela inicial
            switchScreen('resultScreen', 'startScreen');
            switchScreen('creditsScreen', 'startScreen');
            switchScreen('phaseFailScreen', 'startScreen');
            switchScreen('rankingScreen', 'startScreen');
        }

        function showCredits() {
            switchScreen('resultScreen', 'creditsScreen');
        }

        function backToResults() {
            switchScreen('creditsScreen', 'resultScreen');
            switchScreen('rankingScreen', 'resultScreen');
        }

        function switchScreen(fromScreen, toScreen) {
            document.getElementById(fromScreen).classList.remove('active');
            document.getElementById(toScreen).classList.add('active');
        }

        // ==================== INICIALIZA√á√ÉO ====================
        // O jogo inicia na tela de start por padr√£o
    </script>
</body>
</html>